// 0114.cpp : ????????????????????
//

#include "stdafx.h"
#include <string>
#include <vector>
#include "Infile.h"
#include "SplitFile.h"
#include "MergeFile.h"
#include <fstream>
#include <iostream>
#include <algorithm>
using namespace std;

int main()
{
	ifstream file("1.txt");
	if (!file) {
		cout << "????????1" << endl;
		return 0;
	}
	if (!file.is_open()){
		cout << "????????2"<< endl;
		return 0;
	}
	cout << "???????"<< endl;
	string name;
	int age;
	string sex;
	double height;
	int rowNum = 0;
	while (file >> name >> sex >> age >> height)
	{
	
		cout << "??????" << name << "\n"
			<< "???" << sex << "\n"
			<< "????" << age << "\n"
			<< "?????" << height << endl
			<< "--------------------------" << endl;
		++rowNum;
	}
	cout << "???" << rowNum << "??" << endl;
    return 0;
}


void split(const string &str, const string &sp, vector<string> &arr)
{
	size_t left = 0;
	size_t pos = 0;
	while ((pos=str.find(sp,left))!= string::npos) {
		arr.push_back(str.substr(left, pos - left));
		left = pos + sp.size();
	}
	if (left<str.size()) {
		arr.push_back(str.substr(left));
	}
}
int main2()
{
	ifstream file("1.csv");
	string line;
	int rowNumber = 0;
	while (getline(file,line))
	{
		vector<string> arr;
		split(line, ",", arr);
		cout << "??????" << arr[0] << "\n"
			<< "???" << arr[1] << "\n"
			<< "????" << arr[2] << "\n"
			<< "?????" << arr[3] << endl
			<< "--------------------------" << endl;
		++rowNumber;
	}
	cout << "???" << rowNumber << "??" << endl;
	return 0;
}

 /*
 8.?????????N, ??N????????????????????vector?????????????????
???????????????????????????????????1.txt?????
1.txt??????????????????????????????5 3 1, ?????????????
???????5 3 6
?????3 5 6 */


int main3()
{
	ofstream file("2.txt");
	vector<int> v;
	int N;
	cout << "??????????N" << endl;
	cin >> N;
	file << "???????";
	for (int i=0;i<N;++i)
	{
		cout << "???????" <<i+1 << "????" << endl;
		int n;
		cin >> n;
		file << n << " ";
		v.push_back(n);
	}
	cout << "??????????:1???? 2????" << endl;
	int seq;
	cin >> seq;
	if (seq==1)
	{
		sort(v.begin(),v.end());
	}
	else if(seq==2)
	{
		sort(v.rbegin(), v.rend());
	}
	file << "\n"
		<< "?????";
	for (int i = 0; i < N; ++i)
	{
		file << v[i] << " ";
	}
	return 0;
}

/*2???????????????????????????????????????????
????
1.txt??????????????
????,??,22
qq
A,VVV,DD,AA,XX,NN

B,POI

?????
1: 1=????,2=??,3=22
2: 1=qq
3: 1=A,2=VVV,3=DD,4=AA,5=XX,6=NN
4:
5: 1=B,2=POI */


// int main4()
// {
// 	Infile file("info.txt");
// 	file.output();
// 	return 0;
// }

/*7????????SplitFile???????????????
1)?????????split(int num), num??????????????????

????
1.txt??????????????
1
2
3
4
5
6
7

num=3???????3??????????????
1-1.txt
1
2
3

1-2.txt
4
5
6

1-3.txt
7*/


int main5()
{
	SplitFile sf("7.txt");
	sf.split(3);
	return 0;
}

  /*8????????MergeFile????????????????????????,????????????????????????????????*/
int main6()
{
	string s[3] = { {"7-1.txt"},{"7-2.txt" }, { "7-3.txt" } };
	MergeFile m(s,3);
	m.merge();
	return 0;
}

/*11??????????????????????????????;????;???
?????????????????????????????????????????sql?????
sql??????
1????????? ???????????????????????sql?????????????????.txt, ??????????????? ??.sql
2??????????
a. ??????????????????????????????
b. ?????????????
3??????????sql??????????????????????????????
?????????
??.txt
?????????;???;199.10
??????????;????;89.11
????;?????;100*/



int main7()
{
	string textName = "??.txt";
	ifstream infile(textName);
	string line;
	vector<string> arr[1024];
	int m = 0;
	while (getline(infile,line))
	{
		split(line, ";", arr[m++]);
	}
	string sqlName = textName.substr(0, textName.rfind("."))+".sql";
	ofstream outfile(sqlName);
	outfile << "Create table T_test( book_name varchar(30), book_author varchar(30), book_price number(15,2));\n";
	for (int i = 0; i < m; ++i)
	{
		outfile << "insert into T_test values(";
		for (int j = 0; j < arr[i].size(); ++j)
		{
			if (j == arr[i].size() - 1)
			{
				outfile << arr[i][j];
			}
			else
			{
				outfile << "'" << arr[i][j] << "'" << ",";
			}
		}
		outfile << ");\n";

	}
	return 0;
}
int main8()
{
	string s = "{\"hello\":241},{\"hi\":2},{\"hh\":25}";
	string s1, s2;
	s1 = "hi";
	s2 = "hh";
	int m = 32;
	int n = 5;
	s.replace(s.find(s1)+4 , 1, to_string(m));
	s.replace(s.find(s2) + 4, 2, to_string(n));
	cout << s << endl;
	return 0;
}


